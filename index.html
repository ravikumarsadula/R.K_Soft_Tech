<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Progress Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(to right, #667eea, #764ba2);
      min-height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container-custom {
      background: white;
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 900px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    h2 {
      text-align: center;
      color: #4b2f7f;
      margin-bottom: 30px;
    }

    .btn {
      border-radius: 10px;
      font-weight: bold;
      letter-spacing: 0.5px;
    }

    .date-item {
      cursor: pointer;
      padding: 10px 15px;
      background-color: #f2f2f2;
      border-radius: 10px;
      margin-bottom: 10px;
      transition: background 0.3s ease;
    }

    .date-item:hover {
      background-color: #e0d7f3;
    }

    .progress-list li {
      margin-bottom: 8px;
    }

    .alert {
      text-align: center;
      display: none;
    }

    .alert.show {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container-custom">
    <div id="welcomeSection">
      <h2>Welcome to R.K Soft Tech</h2>
      <h2>Your daily Progress Tracker</h2>
<h5 style="font-style: italic; color: green; text-align: center;">"Your Progress, Your Power."</h5>
      <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
        <button id="goToSaveBtn" class="btn btn-primary btn-lg px-5 py-2">Add Progress</button>
        <button id="goToViewBtn" class="btn btn-info btn-lg px-5 py-2 text-white">View Progress</button>
      </div>
    </div>

    <div id="saveSection" style="display: none;">
      <h2>Save Progress</h2>
      <div class="mb-3 d-flex align-items-center gap-3">
        <label for="datePicker" class="form-label mb-0 fw-bold">Select Date:</label>
        <input type="date" id="datePicker" class="form-control w-auto" />
      </div>
      <table class="table table-bordered">
        <thead class="table-dark text-center">
          <tr>
            <th style="width: 5%;">#</th>
            <th style="width: 70%;">Progress</th>
            <th style="width: 25%;">Completed</th>
          </tr>
        </thead>
        <tbody id="taskTableBody"></tbody>
      </table>
      <div class="text-center mt-3">
        <button id="saveBtn" class="btn btn-primary btn-lg px-4 py-2">Save Progress</button>
        <button id="clearBtn" class="btn btn-secondary btn-lg px-4 py-2 ms-2">Clear</button>
        <button id="backToWelcomeFromSave" class="btn btn-info btn-lg px-4 py-2 ms-2 text-white">Back to Home</button>
      </div>
      <div class="alert alert-success mt-3" id="saveAlert">✔️ Your progress is saved! Check it in View Progress.</div>
    </div>

    <div id="viewSection" style="display: none;">
      <h2>View Saved Progress</h2>
      <div id="dateList" class="my-3"></div>
      <div id="progressDetails" class="mt-4"></div>
      <div class="text-center mt-4">
        <button id="backToWelcomeFromView" class="btn btn-info btn-lg px-4 py-2 text-white">Back to Home</button>
      </div>
    </div>
  </div>

  <script>
    const tasks = [
      "Wake Up (6 AM)", "Yoga/Exercise", "Organize Area", "Read News (30m)", "Breakfast",
      "Send DW Screenshot", "Review Plan", "College Work", "Lunch", "Academic Work",
      "Learn Skill (1hr)", "Breaks", "Revise Work (1hr)", "Read Books (1hr)",
      "LinkedIn (30m)", "Dinner", "Journal", "Mobile Limit (<5h)", "Plan Next Day",
      "Meditate (10m)", "Sleep by 11 PM"
    ];

    const taskTableBody = document.getElementById("taskTableBody");
    const datePicker = document.getElementById("datePicker");
    const saveAlert = document.getElementById("saveAlert");
    const progressDetails = document.getElementById("progressDetails");
    const dateList = document.getElementById("dateList");

    const welcomeSection = document.getElementById("welcomeSection");
    const saveSection = document.getElementById("saveSection");
    const viewSection = document.getElementById("viewSection");

    const goToSaveBtn = document.getElementById("goToSaveBtn");
    const goToViewBtn = document.getElementById("goToViewBtn");
    const backToWelcomeFromSave = document.getElementById("backToWelcomeFromSave");
    const backToWelcomeFromView = document.getElementById("backToWelcomeFromView");
    const saveBtn = document.getElementById("saveBtn");
    const clearBtn = document.getElementById("clearBtn");

    function showSection(section) {
      welcomeSection.style.display = "none";
      saveSection.style.display = "none";
      viewSection.style.display = "none";
      section.style.display = "block";
    }

    function createTableRows() {
      taskTableBody.innerHTML = "";
      tasks.forEach((task, idx) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="text-center">${idx + 1}</td>
          <td>${task}</td>
          <td class="text-center"><input type="checkbox" id="taskCheckbox${idx}" /></td>
        `;
        taskTableBody.appendChild(tr);
      });
    }

    function loadData(date) {
      const data = JSON.parse(localStorage.getItem(date)) || {};
      tasks.forEach((task, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        checkbox.checked = data[task] || false;
      });
    }

    function saveData(date) {
      const dataToSave = {};
      tasks.forEach((task, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        dataToSave[task] = checkbox.checked;
      });
      localStorage.setItem(date, JSON.stringify(dataToSave));
      return true;
    }

    function clearData(date) {
      localStorage.removeItem(date);
      tasks.forEach((_, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        if (checkbox) checkbox.checked = false;
      });
    }

    function showSaveAlert() {
      saveAlert.classList.add("show");
      setTimeout(() => saveAlert.classList.remove("show"), 2500);
    }

    function buildDateList() {
      dateList.innerHTML = "";
      progressDetails.innerHTML = "";

      const keys = Object.keys(localStorage).filter(k =>
        tasks.some(t => JSON.parse(localStorage.getItem(k))?.hasOwnProperty(t))
      );

      if (keys.length === 0) {
        dateList.innerHTML = `<p class="text-center fst-italic text-muted">No progress saved yet.</p>`;
        return;
      }

      keys.sort((a, b) => new Date(b) - new Date(a));

      keys.forEach(date => {
        const dateDiv = document.createElement('div');
        dateDiv.classList.add('date-item');
        dateDiv.textContent = date;

        dateDiv.addEventListener('click', () => {
          if (progressDetails.getAttribute('data-date') === date) {
            progressDetails.innerHTML = '';
            progressDetails.removeAttribute('data-date');
          } else {
            showProgressDetails(date);
          }
        });

        dateList.appendChild(dateDiv);
      });
    }

    function showProgressDetails(date) {
      progressDetails.setAttribute('data-date', date);

      const data = JSON.parse(localStorage.getItem(date));
      if (!data) {
        progressDetails.innerHTML = `<p>No data found for ${date}.</p>`;
        return;
      }

      let html = `<h4>Progress for ${date}</h4><ul class="progress-list list-group list-group-flush">`;
      tasks.forEach(task => {
        const done = data[task];
        html += `<li class="list-group-item d-flex justify-content-between align-items-center">
          ${task}
          <span class="badge ${done ? 'bg-success' : 'bg-danger'}">${done ? '✔' : '✘'}</span>
        </li>`;
      });
      html += `</ul>`;

      html += `
        <div class="d-flex justify-content-end gap-2 mt-3">
          <button id="editBtn" class="btn btn-primary btn-sm px-3">Edit</button>
          <button id="deleteBtn" class="btn btn-danger btn-sm px-3">Delete</button>
        </div>
      `;

      progressDetails.innerHTML = html;

      document.getElementById('editBtn').addEventListener('click', () => {
        datePicker.value = date;
        showSection(saveSection);
        createTableRows();
        loadData(date);
      });

      document.getElementById('deleteBtn').addEventListener('click', () => {
        if (confirm(`Are you sure you want to delete progress for ${date}?`)) {
          localStorage.removeItem(date);
          progressDetails.innerHTML = '';
          progressDetails.removeAttribute('data-date');
          buildDateList();
        }
      });
    }

    goToSaveBtn.addEventListener('click', () => {
      showSection(saveSection);
      createTableRows();
      datePicker.value = new Date().toISOString().split("T")[0];
    });

    goToViewBtn.addEventListener('click', () => {
      showSection(viewSection);
      buildDateList();
    });

    backToWelcomeFromSave.addEventListener('click', () => {
      showSection(welcomeSection);
    });

    backToWelcomeFromView.addEventListener('click', () => {
      showSection(welcomeSection);
    });

    saveBtn.addEventListener('click', () => {
      const date = datePicker.value;
      if (!date) {
        alert('Please select a valid date.');
        return;
      }
      if (saveData(date)) {
        showSaveAlert();
        showSection(welcomeSection);
      }
    });

    clearBtn.addEventListener('click', () => {
      const date = datePicker.value;
      if (!date) {
        alert('Please select a valid date.');
        return;
      }
      clearData(date);
      alert('Progress cleared.');
    });
  </script>
</body>
</html>
