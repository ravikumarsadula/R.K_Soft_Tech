<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Progress Tracker</title>
  <!-- Bootstrap CSS CDN -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }

    .tracker-card {
      background: #fff;
      border-radius: 16px;
      padding: 30px 40px;
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.15),
        0 0 20px rgba(102, 126, 234, 0.4);
      max-width: 900px;
      width: 100%;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .tracker-card:hover {
      transform: translateY(-10px);
      box-shadow:
        0 25px 50px rgba(0, 0, 0, 0.2),
        0 0 30px rgba(118, 75, 162, 0.6);
    }

    h2 {
      font-weight: 700;
      color: #4b2f7f;
      margin-bottom: 1.5rem;
      text-align: center;
      text-shadow: 0 2px 6px rgba(118, 75, 162, 0.8);
    }

    label.form-label {
      font-weight: 600;
      color: #5a3e96;
    }

    input[type="date"] {
      border-radius: 12px;
      border: 1.8px solid #764ba2;
      padding: 8px 14px;
      font-weight: 600;
      color: #5a3e96;
      box-shadow: 0 0 10px rgba(118, 75, 162, 0.3);
      transition: border-color 0.3s ease;
    }
    input[type="date"]:focus {
      border-color: #667eea;
      outline: none;
      box-shadow: 0 0 12px #667eea;
    }

    table {
      margin-top: 20px;
      border-radius: 12px;
      overflow: hidden;
    }

    thead.table-dark {
      background: #764ba2;
      color: white;
      font-weight: 700;
      font-size: 1.05rem;
    }

    tbody tr:hover {
      background: #f2e8ff;
    }

    .btn-primary {
      background: #667eea;
      border: none;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    .btn-primary:hover {
      background: #556cd6;
      box-shadow: 0 8px 20px rgba(85, 108, 214, 0.7);
    }

    .btn-secondary {
      background: #a088c6;
      border: none;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(160, 136, 198, 0.4);
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    .btn-secondary:hover {
      background: #8b75b8;
      box-shadow: 0 8px 20px rgba(139, 117, 184, 0.7);
    }

    .btn-info {
      background: #5a3e96;
      border: none;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(90, 62, 150, 0.4);
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    .btn-info:hover {
      background: #4b357c;
      box-shadow: 0 8px 20px rgba(75, 53, 124, 0.7);
    }

    .btn:focus, .btn:active {
      outline: none;
      box-shadow: 0 0 0 0.25rem rgba(118, 75, 162, 0.5);
    }

    /* Sections for SPA style */
    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* Alert styling */
    #saveAlert {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1050;
      padding: 15px 25px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow:
        0 4px 15px rgba(102, 126, 234, 0.5);
      color: #fff;
      background: #4caf50;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    #saveAlert.show {
      opacity: 1;
      pointer-events: auto;
    }

    /* Date list styles */
    .date-item {
      cursor: pointer;
      padding: 10px 15px;
      background: #764ba2;
      color: white;
      border-radius: 10px;
      margin-bottom: 8px;
      user-select: none;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    .date-item:hover {
      background: #5a3e96;
    }

    .progress-details {
      background: #f9f7ff;
      border-radius: 12px;
      margin-bottom: 20px;
      padding: 15px 20px;
      box-shadow: 0 3px 10px rgba(118, 75, 162, 0.3);
      display: none;
    }
    .progress-details.show {
      display: block;
    }

    .progress-list li {
      list-style-type: none;
      padding: 6px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 500;
      border-bottom: 1px solid #ddd;
    }

    .progress-list li:last-child {
      border-bottom: none;
    }

  </style>
</head>
<body>
  <div class="tracker-card shadow">

   <!-- Welcome/Home Section -->
<section id="welcomeSection" class="section active text-center">
    <h2>Welcome to R.K Soft Tech</h2>
    <h2>Your Daily Progress Tracker</h2>
    <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
      <button id="goToSaveBtn" class="btn btn-primary btn-lg px-4">Save Progress</button> 
      <button id="goToViewBtn" class="btn btn-info btn-lg px-4 text-white">View Progress</button>
    </div>
  </section>
  

    <!-- Save Progress Section -->
    <section id="saveSection" class="section">
      <h2>Save Your Progress</h2>

      <div class="mb-4 d-flex justify-content-center align-items-center flex-wrap gap-3">
        <label for="datePicker" class="form-label me-3 fs-5 mb-0">Select Date:</label>
        <input
          type="date"
          id="datePicker"
          class="form-control w-auto"
          max="9999-12-31"
        />
      </div>

      <table class="table table-bordered table-striped">
        <thead class="table-dark text-center">
          <tr>
            <th style="width: 5%;">No.</th>
            <th style="width: 70%;">Progress</th>
            <th style="width: 25%;">Completed</th>
          </tr>
        </thead>
        <tbody id="taskTableBody">
          <!-- Rows added by JS -->
        </tbody>
      </table>

      <div class="text-center">
        <button id="saveBtn" class="btn btn-primary mt-3">Save Progress</button>
        <button id="clearBtn" class="btn btn-secondary mt-3 ms-2">Clear Progress</button>
        <button id="backToWelcomeFromSave" class="btn btn-info mt-3 ms-2 text-white">Back to Home</button>
      </div>
    </section>

    <!-- View Progress Section -->
    <section id="viewSection" class="section">
      <h2>View & Manage Your Progress</h2>
      <div id="dateList" class="mb-4"></div>
      <div id="progressDetails"></div>
      <div class="text-center mt-3">
        <button id="backToWelcomeFromView" class="btn btn-info text-white">Back to Home</button>
      </div>
    </section>

  </div>

  <!-- Alert -->
  <div id="saveAlert">Your progress is saved! You can see it in View Progress.</div>

  <script>
    const tasks = [
      "Wake Up (6 AM)",
      "Yoga/Exercise",
      "Organize Area",
      "Read News (30m)",
      "Breakfast",
      "Send DW Screenshot",
      "Review Plan",
      "College Work",
      "Lunch",
      "Academic Work",
      "Learn Skill (1hr)",
      "Breaks",
      "Revise Work (1hr)",
      "Read Books (1hr)",
      "LinkedIn (30m)",
      "Dinner",
      "Journal",
      "Mobile Limit (<5h)",
      "Plan Next Day",
      "Meditate (10m)",
      "Sleep by 11 PM",
    ];

    // Sections
    const welcomeSection = document.getElementById('welcomeSection');
    const saveSection = document.getElementById('saveSection');
    const viewSection = document.getElementById('viewSection');

    // Elements
    const goToSaveBtn = document.getElementById('goToSaveBtn');
    const goToViewBtn = document.getElementById('goToViewBtn');
    const backToWelcomeFromSave = document.getElementById('backToWelcomeFromSave');
    const backToWelcomeFromView = document.getElementById('backToWelcomeFromView');

    const taskTableBody = document.getElementById('taskTableBody');
    const datePicker = document.getElementById('datePicker');
    const saveBtn = document.getElementById('saveBtn');
    const clearBtn = document.getElementById('clearBtn');

    const dateList = document.getElementById('dateList');
    const progressDetails = document.getElementById('progressDetails');

    const saveAlert = document.getElementById('saveAlert');

    // Show/hide sections helper
    function showSection(section) {
      [welcomeSection, saveSection, viewSection].forEach(sec => {
        sec.classList.remove('active');
      });
      section.classList.add('active');
    }

    // Create progress rows in saveSection table
    function createTableRows() {
      taskTableBody.innerHTML = "";
      tasks.forEach((task, idx) => {
        const tr = document.createElement("tr");

        const tdNo = document.createElement("td");
        tdNo.classList.add("text-center");
        tdNo.textContent = idx + 1;

        const tdTask = document.createElement("td");
        tdTask.textContent = task;

        const tdCheckbox = document.createElement("td");
        tdCheckbox.classList.add("text-center");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = `taskCheckbox${idx}`;
        tdCheckbox.appendChild(checkbox);

        tr.appendChild(tdNo);
        tr.appendChild(tdTask);
        tr.appendChild(tdCheckbox);

        taskTableBody.appendChild(tr);
      });
    }

    // Load saved data for date into checkboxes
    function loadData(date) {
      const savedData = JSON.parse(localStorage.getItem(date)) || {};
      tasks.forEach((task, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        checkbox.checked = savedData[task] || false;
      });
    }

    // Save data from checkboxes to localStorage by date
    function saveData(date) {
      const dataToSave = {};
      tasks.forEach((task, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        dataToSave[task] = checkbox.checked;
      });
      localStorage.setItem(date, JSON.stringify(dataToSave));
      return true;
    }

    // Clear data for date
    function clearData(date) {
      localStorage.removeItem(date);
      // Clear checkboxes
      tasks.forEach((_, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        if (checkbox) checkbox.checked = false;
      });
    }

    // Show alert message temporarily
    function showSaveAlert() {
      saveAlert.classList.add("show");
      setTimeout(() => saveAlert.classList.remove("show"), 2500);
    }

    // Build list of dates with saved progress
    function buildDateList() {
      dateList.innerHTML = "";
      progressDetails.innerHTML = "";

      const keys = Object.keys(localStorage).filter(k => tasks.some(t => JSON.parse(localStorage.getItem(k))?.hasOwnProperty(t)));

      if(keys.length === 0){
        dateList.innerHTML = `<p class="text-center fst-italic text-muted">No progress saved yet.</p>`;
        return;
      }

      // Sort dates descending (newest first)
      keys.sort((a,b) => new Date(b) - new Date(a));

      keys.forEach(date => {
        const dateDiv = document.createElement('div');
        dateDiv.classList.add('date-item');
        dateDiv.textContent = date;

        dateDiv.addEventListener('click', () => {
          // If clicked date is already shown, toggle off
          if(progressDetails.getAttribute('data-date') === date){
            progressDetails.innerHTML = '';
            progressDetails.removeAttribute('data-date');
          } else {
            showProgressDetails(date);
          }
        });

        dateList.appendChild(dateDiv);
      });
    }

    // Show progress details for selected date
    function showProgressDetails(date) {
      progressDetails.setAttribute('data-date', date);

      const data = JSON.parse(localStorage.getItem(date));
      if (!data) {
        progressDetails.innerHTML = `<p>No data found for ${date}.</p>`;
        return;
      }

      let html = `<h4>Progress for ${date}</h4><ul class="progress-list">`;
      tasks.forEach(task => {
        const done = data[task];
        html += `<li>${task} <span class="badge ${done ? 'bg-success' : 'bg-danger'}">${done ? '✔' : '✘'}</span></li>`;
      });
      html += `</ul>`;

      html += `
        <div class="d-flex justify-content-end gap-2 mt-3">
          <button id="editBtn" class="btn btn-primary btn-sm">Edit</button>
          <button id="deleteBtn" class="btn btn-danger btn-sm">Delete</button>
        </div>
      `;

      progressDetails.innerHTML = html;

      // Attach event listeners to Edit/Delete buttons
      document.getElementById('editBtn').addEventListener('click', () => {
        // Load data in saveSection
        datePicker.value = date;
        showSection(saveSection);
        createTableRows();
        loadData(date);
      });

      document.getElementById('deleteBtn').addEventListener('click', () => {
        if(confirm(`Are you sure you want to delete progress for ${date}?`)){
          localStorage.removeItem(date);
          progressDetails.innerHTML = '';
          progressDetails.removeAttribute('data-date');
          buildDateList();
        }
      });
    }

    // Event Listeners
    goToSaveBtn.addEventListener('click', () => {
      showSection(saveSection);
      createTableRows();
      const today = new Date().toISOString().split("T")[0];
      datePicker.value = today;
      tasks.forEach((_, idx) => {
        const checkbox = document.getElementById(`taskCheckbox${idx}`);
        if(checkbox) checkbox.checked = false;
      });
    });

    goToViewBtn.addEventListener('click', () => {
      showSection(viewSection);
      buildDateList();
    });

    backToWelcomeFromSave.addEventListener('click', () => {
      showSection(welcomeSection);
    });

    backToWelcomeFromView.addEventListener('click', () => {
      showSection(welcomeSection);
    });

    saveBtn.addEventListener('click', () => {
      const date = datePicker.value;
      if (!date) {
        alert('Please select a valid date.');
        return;
      }
      if (saveData(date)) {
        showSaveAlert();
        showSection(welcomeSection);
      }
    });

    clearBtn.addEventListener('click', () => {
      const date = datePicker.value;
      if(!date){
        alert('Please select a valid date.');
        return;
      }
      clearData(date);
      alert('Progress cleared for the selected date.');
    });

  </script>

  <!-- Bootstrap JS Bundle (for components, if needed) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/js/bootstrap.bundle.min.js"
  ></script>
</body>
</html>
